//# sourceMappingURL=asteroids.min.js.map
(function(c,a){function d(a){c.addEventListener("load",function(){new d.Ac(a)})}c.K=d;d.extend=function(a,d){for(var b in d)a[b]=d[b]};d.extend(d,{g:function(a){this.extend(a)},ga:function(a){return function(d){return new a(d)}},id:function(d){return a.getElementById(d)},ready:function(a){c.addEventListener("load",a,!1)},I:function(d){return a.createElement(d)}});d.I.src=function(d,c){var b=a.createElement(d);b.setAttribute("src",c);return b};d.I.gc=function(a){return d.I.src("img",a)};d.g.extend=
function(a,c){function b(){}var g,h=this,m=a.d||function(){h.apply(this,arguments)},n;b.prototype=h.prototype;m.prototype=new b;m.extend=d.g.extend;for(g in a)a.hasOwnProperty(g)&&(n=Object.getOwnPropertyDescriptor(a,g),Object.defineProperty(m.prototype,g,n));for(g in c)c.hasOwnProperty(g)&&(n=Object.getOwnPropertyDescriptor(c,g),Object.defineProperty(m,g,n));return m};d.g.prototype.extend=function(a){for(var d in a)this[d]=a[d]}})(this,this.document);
(function(c,a,d){var e=a.I("CANVAS"),f=a.ga;a.extend(a,{ka:function(b){return Math.random()*b},hc:function(b){return Math.random()*b|0},Qf:function(b,a,d){var c=[],e;if(a)for(;a--;)for(c[a]=[],e=0;e<b;e++)c[a][e]=d;else for(;b--;)c.push(d);return c},canvas:function(b,g){var d=a.I("CANVAS");d.setAttribute("width",b);d.setAttribute("height",g);return d},ia:function(b){var g=typeof b;if("object"===g){if(null===b)return"null";if(b instanceof Array)return"array";if(b instanceof a.g)return"j5g3";if(b instanceof
c.HTMLElement||b instanceof c.Image)return"dom";if(b instanceof c.HTMLAudioElement)return"audio"}return g},Zf:function(b,a,d,c){return e.getContext("2d").createLinearGradient(b,a,d,c)},kg:function(b,a,h,c){c===d&&(c=1);return"rgba("+b+","+a+","+h+","+c+")"},ag:function(b,a,h,c){c===d&&(c=1);return"hsla("+b+","+a+"%,"+h+"%,"+c+")"}});a.ra={wb:function(){},Hd:function(b){this.U(b);this.A(b);this.end(b)},Jf:function(b){this.A(b)},Sd:function(){var b=this.Ua;b.clearRect(0,0,this.width,this.height);this.U(b);
this.A(b);this.end(b);this.screen.clearRect(0,0,this.width,this.height);this.screen.drawImage(this.Da,0,0)},Td:function(){var b=this.Ua,a=this.C,d=this.O,c=this.D,e=this.N;0!==d&&0!==e&&(b.clearRect(a,c,d,e),this.U(b),this.A(b),this.end(b),this.screen.clearRect(a,c,d,e),this.screen.drawImage(this.Da,a,c,d,e,a,c,d,e),this.C=this.D=null,this.N=this.O=0)},Kf:function(){var b=this.Ua;this.clearRect(0,0,this.canvas.width,this.canvas.height);this.U(b);this.A(b);this.end(b)},Ef:function(b){b.drawImage(this.source,
this.x+this.b,this.y+this.c)},sb:function(b){b.drawImage(this.$d,0,0,this.width,this.height,this.x+this.b,this.y+this.c,this.width,this.height)}};a.aa={Image:function(b){b.drawImage(this.source,this.b,this.c)},ua:function(b){var a=this.source;b.drawImage(a.gc,a.x,a.y,a.na,a.ed,this.b,this.c,this.width,this.height)},Ka:function(b){var a=this.frame,d=a;for(b.translate(this.b,this.c);(d=d.F)!==a;)d.G(b)},Text:function(b){b.fillText(this.text,this.b,this.c)},Rd:function(b){for(var a=this.text.split("\n"),
d=0,c=a.length,e=0;d<c;d++)b.fillText(a[d],this.b,this.c+e),e+=this.Eb},Nf:function(b){b.strokeText(this.text,this.b,this.c)},Of:function(b){b.fillText(this.text,this.b,this.c);b.strokeText(this.text,this.b,this.c)},tb:function(b){var a=this.map,d=a.length,c,e=this.jb,f,l;for(b.translate(this.b,this.c+d*this.mb);d--;)for(c=a[d].length,l=a[d],b.translate(c*this.$,-this.mb);c--;)b.translate(-this.$,0),(f=e[l[c]])&&f.G(b)},Ff:function(b){var a=this.map,d=0,c,e=a.length,f=this.jb,l;c=(this.$/2|0)+this.offsetX;
var p=(this.mb/2|0)+this.offsetY,r,q;b.translate(this.b,this.c-p);for(r=c;d<e;d++)for(c=a[d].length,l=a[d],r=-r,b.translate(c*this.$-r,p);c--;)b.translate(-this.$,0),(q=f[l[c]])&&q.G(b)}};a.sb={Gd:function(b,d){var c=a.I("CANVAS"),e;c.width=b||this.width;c.height=d||this.height;e=c.getContext("2d",!1);e.translate(-this.x-this.b,-this.y-this.c);this.Ce();this.G(e);this.$d=c;this.Lc=this.G;this.G=a.ra.sb;return this},tf:function(b,a){return b(a,e.getContext("2d"))}};a.La={wb:function(){return!1},qa:function(b,
a,d){d=d?d.product(this.r,this.x,this.y):this.r.Sb(this.x,this.y);d.vc(b,a);return d.x*d.x+d.y*d.y<=this.a*this.a?this:!1},Ka:function(b,a,d){var c=this.frame,e=c,f;for(d=d?d.product(this.r,this.x,this.y):this.r.Sb(this.x,this.y);(e=e.H)!==c&&!(f=e.Sa(b,a,d)););return f},Rect:function(b,a,d){d=d?d.product(this.r,this.x,this.y):this.r.Sb(this.x,this.y);d.vc(b,a);return 0<d.x&&d.x<this.width&&0<d.y&&d.y<this.height?this:!1},ub:function(b,a,d){var c=this.w,e=this.nc,f=0,l=c.length;d=d?d.product(this.r,
this.x,this.y):this.r.Sb(this.x,this.y);for(d.vc(b,a);f<l;f+=2)if(b=e[f]*(d.x-c[f])+e[f+1]*(d.y-c[f+1]),0<b)return!1;return this}};a.Pd=a.g.extend({h:1,i:0,j:0,k:1,Vb:1,Zb:0,hb:1,ib:1,d:function(b,a,c,e){b!==d&&(this.h=b,this.i=a,this.j=c,this.k=e)},lf:function(b){this.Vb=Math.cos(b);this.Zb=Math.sin(b);return this.zb()},mf:function(b){this.hb=b;return this.zb()},nf:function(b){this.ib=b;return this.zb()},scale:function(b,a){this.hb=b;this.ib=a;return this.zb()},zb:function(){this.h=this.hb*this.Vb;
this.i=this.hb*this.Zb;this.j=-this.ib*this.Zb;this.k=this.ib*this.Vb;return this},Sb:function(b,d){return new a.Bc(this.h,this.i,this.j,this.k,b||0,d||0)}});a.Bc=a.g.extend({h:1,i:0,j:0,k:1,u:0,v:0,d:function(b,a,c,e,f,k){b!==d&&(this.h=b,this.i=a,this.j=c,this.k=e,this.u=f,this.v=k)},translate:function(b,a){this.u+=b;this.v+=a},multiply:function(b,a,d,c,e,f){var l=this.h,p=this.i,r=this.j,q=this.k;this.h=l*b+r*a;this.i=p*b+q*a;this.j=l*d+r*c;this.k=p*d+q*c;this.u+=l*e+r*f;this.v+=p*e+q*f;return this},
clone:function(){return a.Ze().multiply(this.h,this.i,this.j,this.k,this.u,this.v)},inverse:function(){var b=this.clone(),a=this.h*this.k-this.i*this.j;b.h=this.k/a;b.i=this.i/-a;b.j=this.j/-a;b.k=this.h/a;b.u=(this.k*this.u-this.j*this.v)/-a;b.v=(this.i*this.u-this.h*this.v)/a;return b},product:function(b,a,d){return this.clone().multiply(b.h,b.i,b.j,b.k,b.u||a||0,b.v||d||0)},reset:function(){this.h=1;this.j=this.i=0;this.k=1;this.v=this.u=0;return this},qg:function(b,a){this.x=this.h*b+this.j*a+
this.u;this.y=this.i*b+this.k*a+this.v;return this},vc:function(b,a){var d=this.h*this.k-this.i*this.j;this.x=(this.k*b-this.j*a+this.j*this.v-this.k*this.u)/d;this.y=(-this.i*b+this.h*a+this.i*this.u-this.h*this.v)/d;return this}});a.f=a.g.extend({source:null,F:null,H:null,parent:null,r:null,x:0,y:0,b:0,c:0,width:null,height:null,Pc:0,set rotation(b){this.r.lf(this.Pc=b)},get rotation(){return this.Pc},set Fa(b){this.r.mf(b)},get Fa(){return this.r.hb},set Ga(b){this.r.nf(b)},get Ga(){return this.r.ib},
alpha:1,Sc:null,stroke:null,fill:null,font:null,Fb:null,jc:null,kc:null,qd:null,Vf:!0,d:function(b){this.r=new a.Pd;this.extend(b)},U:function(b){var a=this.r;b.save();1!==this.alpha&&(b.globalAlpha*=this.alpha);null!==this.fill&&(b.fillStyle=this.fill);null!==this.stroke&&(b.strokeStyle=this.stroke);null!==this.font&&(b.font=this.font);null!==this.Sc&&(b.globalCompositeOperation=this.Sc);null!==this.Fb&&(b.lineWidth=this.Fb);null!==this.jc&&(b.lineCap=this.jc);null!==this.kc&&(b.lineJoin=this.kc);
null!==this.qd&&(b.miterLimit=this.qd);b.transform(a.h,a.i,a.j,a.k,this.x,this.y)},end:function(b){b.restore()},G:a.ra.Hd,pe:null,J:function(){this.parent.J(this)},update:null,remove:function(){this.parent&&(this.H.F=this.F,this.F.H=this.H,this.parent=this.H=null);return this},align:function(b,a){a=a||this.parent;switch(b){case "center":this.x=a.width/2;break;case "left":this.x=0;break;case "right":this.x=a.width-this.width;break;case "middle":this.y=a.height/2;break;case "center middle":this.L(a.width/
2,a.height/2);break;case "origin":this.L(-this.width/2,-this.height/2);break;case "origin top":this.L(-this.width/2,-this.height);break;case "origin bottom":this.L(-this.width/2,0)}return this},L:function(b,a){this.x=b;this.y=a;return this},size:function(b,a){this.width=b;this.height=a;return this},move:function(b,a){this.x+=b;this.y+=a;return this},visible:function(){return 0<this.alpha},stretch:function(b,a){return this.scale(b/this.width,a/this.height)},og:function(){return a.clip({width:this.width,
height:this.height}).add(this)},Tf:a.sb.Gd,Ce:function(){this.Lc&&(this.G=this.Lc)},set:function(b){this.extend(b);return this},Sa:a.La.Rect,scale:function(b,a){c.isNaN(b)||(this.Fa=b);c.isNaN(a)||(this.Ga=a);return this},rotate:function(b){this.rotation+=b;return this}});a.Image=a.f.extend({d:function(b){switch(a.ia(b)){case "string":b={source:a.id(b)};break;case "dom":b={source:b}}a.f.call(this,b);this.source&&this.of(this.source)},A:a.aa.Image,fe:function(b){return"string"===typeof b?a.id(b):b},
of:function(b){this.source=this.fe(b);null===this.width&&(this.width=this.source.naturalWidth||this.source.width);null===this.height&&(this.height=this.source.naturalHeight||this.source.height)}});a.Text=a.f.extend({text:"",Eb:null,Pf:null,ba:function(b){var a=this.pd();"left"===b?this.b=0:"center"===b?this.b=-a/2:"right"===b&&(this.b=-a);return this},d:function(b){"string"===typeof b&&(b={text:b});a.f.call(this,b);null===this.Eb&&this.pd()},pe:a.aa.Text,A:a.aa.Text,ne:function(b,d){var c=(""+b.text).split("\n"),
e,f=c.length,k=0;a:{e=b;do{if(null!==e.font){e=e.font;break a}if(e instanceof a.vb)break}while(e=e.parent);e=void 0}b.U(d);e&&(d.font=e);for(;f--;)e=d.measureText(c[f]),e.width>k&&(k=e.width);null===b.Eb&&(b.Eb=parseInt(d.font,10));b.end(d);return k},Ub:a.f.prototype.U,U:function(b){b.textBaseline="top";this.Ub(b)},pd:function(){return a.sb.tf(this.ne,this)}});a.Ld=a.f.extend({fd:"",d:function(b){"string"===typeof b&&(b={fd:a.I(b).innerHTML});a.f.apply(this,[b])}});a.m=a.f.extend({S:null,va:0,length:null,
gb:!0,Qb:1,d:function(b){a.f.call(this,b);this.S=[];this.T();null!==this.M&&this.M()},J:function(b){this.parent.J(b||this)},M:null,update:function(){var b=this.frame,a=b;for(this.ma&&this.ma();(a=a.F)!==b;)null!==a.update&&a.update();this.gb&&((this.va+=this.Qb)>=this.length&&(this.va=0),this.frame=this.S[this.va|0])},frame:null,A:a.aa.Ka,stop:function(){this.gb=!1;return this},play:function(){this.gb=!0;return this},add:function(b){switch(a.ia(b)){case "function":b=new a.yc(b);break;case "string":b=
new a.Image({source:b});break;case "array":for(var d=0;d<b.length;d++)this.add(b[d]);return this;case "dom":case "object":b=new a.Image(b);break;case "undefined":case "null":throw"Trying to add undefined object to clip.";}return this.yb(b)},yb:function(b){var a=this.frame;b.parent&&b.remove();a.H.F=b;b.H=a.H;b.F=a;b.parent=this;a.H=b;return this},T:function(b){var a={};a.H=a.F=a;this.S.push(a);this.go((this.length=this.S.length)-1);return b?this.add(b):this},dg:function(){return this.frame.F===this.frame},
xd:function(b){b=b===d?this.va:b;this.S.splice(b,1);this.go(0<b?b-1:0);this.length=this.S.length;return this},go:function(b){this.frame=this.S[this.va=b];return this},Va:function(b){for(var a=this.S.length,d,c;a--;)for(c=d=this.S[a];(c=c.F)!==d;)b(c);return this},Ie:function(b){for(var a=this.frame,d=a,c;(d=c=d.F)!==a;)for(;(c=c.F)!==a;)b(d,c)},$b:function(b){return this.Va(function(a){a.align&&a.align(b)})},Sa:a.La.Ka});a.vb=a.m.extend({canvas:null,Ua:null,screen:null,Da:null,mg:!1,background:!1,
X:!1,C:0,D:0,O:0,N:0,ie:function(){if(!1===this.X)return this.X=c.document.body;if("dom"===a.ia(this.X))return this.X;var b=this.X=a.I("DIV");b.className="j5g3-stage";c.document.body.appendChild(b);return b},he:function(){var b=this.ie();this.canvas||(this.canvas=a.canvas(this.width,this.height),this.background?b.insertBefore(this.canvas,b.firstChild):b.appendChild(this.canvas));this.Da=a.I("CANVAS")},je:function(){this.Ua=this.Da.getContext("2d");this.screen=this.canvas.getContext("2d")},d:function(b){a.m.call(this,
b);this.he();this.kf(this.width||this.canvas.clientWidth||640,this.height||this.canvas.clientHeight||480);this.je()},md:function(b){var d;"string"===typeof b&&(b={canvas:a.id(b)});a.extend(d={width:this.width,height:this.height,X:this.X},b);b=new a.vb(d);b.G=a.ra.Td;this.add(b);return b},J:function(b){if(b===d)this.C=this.D=0,this.N=this.height,this.O=this.width;else{var a=b.x+b.b,c=b.y+b.c;null===this.C?this.C=a:a<this.C&&(this.O+=this.C-a,this.C=a);null===this.D&&(this.D=c);c<this.D&&(this.N+=this.D-
c,this.D=c);a+b.width>this.C+this.O&&(this.O=a+b.width-this.C,this.C+this.O>this.width&&(this.O=this.width-this.C));c+b.height>this.D+this.N&&(this.N=c+b.height-this.D,this.D+this.N>this.height&&(this.N=this.height-this.D))}},kf:function(b,a){if(0===b||0===a)throw Error("Invalid stage resolution: "+b+"x"+a);this.O=this.canvas.width=this.Da.width=b;this.N=this.canvas.height=this.Da.height=a;return this.size(b,a)},G:a.ra.Sd});a.Vd=a.f.extend({ac:!1,repeat:Infinity,duration:100,Za:null,target:null,uc:null,
Ha:0,sd:null,Nb:null,d:function(b){b instanceof a.g&&(b={target:b});this.update=this.start;a.f.apply(this,[b])},G:a.ra.wb,pause:function(){this.Mc=this.update;this.update=null;return this},yd:function(){this.update=this.Mc?this.Mc:this.start;return this},zd:function(){this.repeat-=1;this.qb=this.Ha=0;return this},jg:function(){this.Ha=0;return this.stop().start()},stop:function(){this.pause().zd();this.sd&&this.sd();return this},Je:function(b){return b},ye:function(b,a){return this.Za[b]+this.Je(a)*
(this.uc[b]-this.Za[b])},re:a.f.prototype.remove,remove:function(){this.Nb&&this.Nb();this.re()},ae:function(){var b=this.target,a;this.duration===this.Ha&&(this.qb=1);for(a in this.uc)b[a]=this.ye(a,this.qb);this.Ha<this.duration?(this.Ha++,this.qb+=this.uf):this.ac?this.remove():this.repeat?this.zd():this.stop()},start:function(){var b=this.uc,a,d=this.target;if(null===this.Za)for(a in this.Za={},b)this.Za[a]=d[a];this.uf=1/this.duration;this.qb=0;this.update=this.ae;return this},Sa:a.La.wb});a.ua=
a.f.extend({d:function(b){a.f.call(this,b);if(!this.source)throw Error("Invalid source property for Sprite");null===this.width&&(this.width=this.source.na);null===this.height&&(this.height=this.source.ed)},A:a.aa.ua});a.Ud=a.g.extend({width:null,height:null,xb:null,d:function(b){switch(a.ia(b)){case "string":case "dom":case "j5g3":b={source:b}}a.g.call(this,b)},set source(b){switch(a.ia(b)){case "string":case "dom":b=new a.Image(b);break}if(!b)throw Error("Invalid source for Spritesheet.");null===
this.width&&b&&(this.width=b.width);null===this.height&&b&&(this.height=b.height);this.se=b;this.xb=[]},get source(){return this.se},select:function(b){var a=[];this.Va(b,function(b){a.push(b)});return a},Va:function(b,a){for(var d=0,c=b.length;d<c;d++)a(this.P(b[d]));return this},clip:function(b){var d=a.clip().xd(),c=0,e=0;this.Va(b,function(b){d.T(b);b.width>c&&(c=b.width);b.height>e&&(e=b.height)});return d.size(c,e).go(0)},push:function(b,a,d,c){this.slice(b,a,d,c);return this},slice:function(b,
a,d,c){return this.xb.push({width:d,height:c,source:{gc:this.source.source,x:b,y:a,na:d,ed:c}})-1},da:function(b,a,d,c){return this.P(this.slice(b,a,d,c))},$f:function(b,a,d){d=d||0;var c=2*d,e=this.width/b-c|0,f=this.height/a-c|0,l,p;for(l=0;l<a;l++)for(p=0;p<b;p++)this.slice(p*(e+c)+d,l*(f+c)+d,e,f);return this},P:function(b){return new a.ua(this.xb[b])},jb:function(){for(var b=0,a=this.xb.length,d=[];b<a;b++)d.push(this.P(b));return d},map:function(b,d){return new a.tb({jb:this.jb(),$:b,mb:d})}});
a.Kd=a.m.extend({d:function(b){a.m.apply(this,[b])},source:a.m,Ee:function(){this.me--?null!==this.Gc&&this.Gc():this.remove()},bb:10,rd:null,count:1,qf:function(){var b=new this.source;b.me=this.bb;b.Gc=b.update;b.update=this.Ee;return b},ce:function(){var b=this.qf();this.yb(b);this.rd&&this.rd(b)},ma:function(){for(var b=this.count;b--;)this.ce()}});a.tb=a.f.extend({jb:null,map:null,$:0,mb:0,offsetX:0,offsetY:0,d:function(b){a.f.apply(this,[b]);null===this.map&&(this.map=[])},pg:function(b,a){var d=
(this.$/2|0)+this.offsetX;return{x:(b*this.$-(a%2?0:-d)|0)-this.b,y:(a*((this.mb/2|0)+this.offsetY)|0)-this.c}},A:a.aa.tb});a.yc=a.g.extend({ge:a.g,update:null,G:a.ra.wb,d:function(b){"function"===a.ia(b)&&(b={update:b});this.ge(b)},remove:a.f.prototype.remove},{rotate:function(b){return function(){b.rotation=6.1>b.rotation?b.rotation+.1:0}}});a.Ac=a.g.extend({version:"0.9.0",Tb:31,Yb:null,Hc:null,Oc:0,Ic:0,paused:!0,Ad:function(){var b=this;b.Vc();b.Yb=function(){b.Nc()};b.Nc();b.Hc=function(){b.ee()};
b.Ic=c.setInterval(b.Hc,b.Tb);b.paused=!1;return b},Vc:function(){c.clearInterval(this.Ic);c.cancelAnimationFrame(this.Oc)},Bb:function(){this.pause();this.df&&this.df()},Nc:function(){this.Q.G();this.Oc=c.requestAnimationFrame(this.Yb)},ee:function(){this.Q.update()},sc:function(){},d:function(b){"function"===typeof b&&(b={sc:b});b===d&&(b={});e.style.display="none";e.setAttribute("id","j5g3-cache");c.document.body.appendChild(e);a.g.apply(this,[b]);this.kb||(this.kb={});this.kb.canvas||(this.kb.canvas=
a.id("screen"));this.Q||(this.Q=new a.vb(this.kb));this.sc(a,this)},pause:function(){this.Vc();this.Yb=function(){};this.paused=!0},yd:function(){this.paused&&this.Ad()},set cd(b){this.Tb=1E3/b},get cd(){return 1E3/this.Tb},bg:function(b,d){var c,f;switch(a.ia(b)){case "string":c=a.id(b);break;case "dom":c=b;break;case "j5g3":c=b.source}return c?(e.width=c.width,e.height=c.height,f=e.getContext("2d"),f.drawImage(c,0,0),f.getImageData(0,0,c.width,c.height)):this.Q.Ua.createImageData(b||this.Q.canvas.width,
d||this.Q.canvas.height)}});a.Cf=function(){function b(b,a){c["EaseIn"+b]=a;c["EaseOut"+b]=function(b){return 1-a(1-b)};c["EaseInOut"+b]=function(b){return.5>b?a(2*b)/2:a(-2*b+2)/-2+1}}var a={},d,c={};["Quad","Cubic","Quart","Quint","Expo"].forEach(function(b,d){a[b]=function(b){return Math.pow(b,d+2)}});a.Lf=function(b){return 1-Math.cos(b*Math.PI/2)};a.Bf=function(b){return 1-Math.sqrt(1-b*b)};a.Df=function(b){return 0===b||1===b?b:-Math.pow(2,8*(b-1))*Math.sin((80*(b-1)-7.5)*Math.PI/15)};a.zf=
function(b){return b*b*(3*b-2)};a.Af=function(b){for(var a,d=4;b<((a=Math.pow(2,--d))-1)/11;);return 1/Math.pow(4,3-d)-7.5625*Math.pow((3*a-2)/22-b,2)};for(d in a)b(d,a[d]);c.If=function(b){return b};c.Mf=function(b){return-Math.cos(b*Math.PI)/2+.5};return c}();a.action=f(a.yc);a.clip=f(a.m);a.gc=f(a.Image);a.P=f(a.ua);a.B=f(a.Ud);a.text=f(a.Text);a.Q=f(a.vb);a.gg=function(b){b=new a.Text(b);b.A=a.aa.Rd;return b};a.Ze=function(){return new a.Bc(void 0,void 0,void 0,void 0,void 0,void 0)};a.Fd=f(a.Vd);
a.Xf=f(a.Kd);a.map=f(a.tb);a.fd=f(a.Ld);a.Yf=f(a.Ac)})(this,this.K);
(function(c,a){a.Od=a.g.extend({Jd:{IMG:"load",AUDIO:"canplaythrough",SCRIPT:"load"},Z:null,Ge:250,wd:0,start:null,length:0,eb:null,Ob:null,fb:null,d:function(d){a.g.apply(this,[d]);this.Z={};this.start=new Date},Ec:function(){var a,e=0,f=0,b=this;for(a in this.Z)f++,this.Z.hasOwnProperty(a)&&this.Z[a].ready&&e++;this.wd=e?e/f:0;this.eb&&this.eb(this.wd);f===e?this.fb&&this.fb():this.te=c.setTimeout(function(){b.Ec()},this.Ge)},V:function(d,e){var f=this,b=this.Z[e],g;b?b=b.V:(b=a.I(d),this.Z[e]=
g={V:b},b.addEventListener(this.Jd[d],function(){g.ready=!0;f.Ob&&f.Ob(g)},!1),b.addEventListener("error",function(){g.ready=!0;c.console.warn("Could not load asset: "+e)},!1),b.setAttribute("src",e),this.length++);return b},gd:function(a){return this.V("IMG",a)},audio:function(d){var c=d.split(".").pop();a.lb.audio[c]||(d=d.replace(new RegExp("\\."+c+"$"),"."+a.lb.audio.hf));return this.V("AUDIO",d)},data:function(a,e){var f=this,b=new c.XMLHttpRequest,g=this.Z[a];g||(g=this.Z[a]={source:a,ig:b},
b.onreadystatechange=function(){4===b.readyState&&(g.ready=!0,g.jf=b.responseText,e&&e(g),f.Ob&&f.Ob(b))},b.open("GET",a),b.send());return g},We:function(a){return this.data(a,function(a){a.We=JSON.parse(a.jf)})},lg:function(a){a=this.V("SCRIPT",a);c.document.head.appendChild(a);return a},ready:function(a){a&&(this.fb=a);this.Ec()},Bb:function(){c.clearTimeout(this.te)}});a.Ye=a.ga(a.Od)})(this,this.K);
(function(c){c.Ja=c.g.extend({rb:null,Ia:null,Jb:0,Kb:0,pc:0,length:0,ob:0,pb:0,0:null,1:null,2:null,3:null,4:null,5:null,6:null,qc:null});c.Ja.qa=c.Ja.extend({qc:function(a,d){var c=a.a+d.a,f=a.x+a.a+a.b,b=a.y+a.a+a.c,g=f-d.a-d.b-d.x,h=b-d.a-d.c-d.y,m=g*g+h*h;if(this.ya=c*c>m)return m=Math.sqrt(m),this.rb=a,this.Ia=d,this.Jb=g/m,this.Kb=h/m,this.pc=c-m,this[0]=f-g/2,this[1]=b-h/2,!0}});c.Ja.xc=c.Ja.extend({qc:function(a,d){var c=a.x+a.b,f=d.x+d.b,b=a.y+a.c,g=d.y+d.c,h=c+a.width,m=f+d.width,n=b+a.height,
k=g+d.height,l,p;if(this.ya=!(f>=h||m<=c||g>=n||k<=b))return this.Ia=d,l=this.ob=m/2-h/2,p=this.pb=k/2-n/2,this[0]=Math.max(c,f),this[1]=Math.max(b,g),this[2]=Math.min(h,m),this[3]=Math.min(n,k),this[2]-this[0]<this[3]-this[1]?(this.Jb=0>l?-1:1,this.Kb=0,this.pc=0>l?this[2]-c:h-this[0]):(this.Kb=0>p?-1:1,this.Jb=0,this.pc=0>p?this[3]-b:n-this[1]),this}});c.zc={qa:function(a){var d=this.a+a.a,c=this.x+this.a+this.b-a.a-a.b-a.x;a=this.y+this.a+this.c-a.a-a.c-a.y;return d*d>c*c+a*a},xc:function(a){var d=
this.y+this.height,c=a.x+a.width,f=a.y+a.height;return!(a.x>this.x+this.width||c<this.x||a.y>d||f<this.y)},Ka:function(a){var d=this.frame,c=d,f=!1;for(a={x:a.x-this.x,y:a.y-this.y,width:a.width,height:a.height};(c=c.H)!==d&&!(f=c.ya&&c.ya(a)););return f}};c.f.prototype.ya=c.zc.xc;c.m.prototype.ya=c.zc.Ka})(this.K);
(function(c,a){c.R=c.f.extend({shape:null,red:a,green:a,blue:a,Wc:"fill",Xb:a,Jc:a,Dc:a,Fb:null,d:function(a){c.f.apply(this,[a])},Ub:c.f.prototype.U,U:function(a){if(this.red!==this.Xb||this.blue!==this.Dc||this.green!==this.Jc)this[this.Wc]="rgb("+Math.floor(this.red)+","+Math.floor(this.green)+","+Math.floor(this.blue)+")",this.Xb=this.Xb,this.Jc=this.green,this.Dc=this.blue;this.Ub(a)},Pb:function(){},A:function(a){a.beginPath();this.Pb(a);a.closePath();a.fill();a.stroke()}});c.qa=c.R.extend({shape:"circle",
a:0,d:function(a){"number"===typeof a&&(a={a:a});c.R.apply(this,[a])},Pb:function(a){a.arc(this.a+this.b,this.a+this.c,this.a,0,2*Math.PI,!1)},Sa:c.La.qa});c.Md=c.R.extend({vf:0,wf:0,Pb:function(a){a.moveTo(this.b,this.c);a.lineTo(this.vf,this.wf)}});c.ub=c.R.extend({shape:"polygon",w:null,nc:null,d:function(a){c.R.apply(this,[a]);null===this.w&&(this.w=[]);null===this.nc&&this.Be()},normalize:function(a){var c=Math.sqrt(a[0]*a[0]+a[1]*a[1]);a[0]/=c;a[1]/=c;return a},Be:function(){for(var a=0,c,f=
this.w,b=f.length,g=[],h=[0,0];a<b;a+=2)c=a+2<b?a+2:0,h[0]=f[c]-f[a],h[1]=f[c+1]-f[a+1],this.normalize(h),g.push(h[1],-h[0]);this.nc=g},Pb:function(a){var c=2,f=this.w,b=f.length;for(a.moveTo(f[0],f[1]);c<b;c+=2)a.lineTo(f[c],f[c+1])},Sa:c.La.ub},{create:function(a,e){var f=2*Math.PI/a,b=f;for(e.w=[];a--;)e.w.push(Math.cos(b)*e.a,Math.sin(b)*e.a),b+=f;return new c.ub(e)}});c.Rect=c.R.extend({shape:"polygon",d:function(a){c.R.apply(this,[a]);null===this.width&&(this.height=this.width=2*this.a)},A:function(a){a.fillRect(this.b,
this.c,this.width,this.height);a.strokeRect(this.b,this.c,this.width,this.height)}});c.Id=c.R.extend({shape:"circle",jc:"round",kc:"round",Wc:"stroke",d:function(a){"number"===typeof a&&(a={Fb:a});c.R.apply(this,[a])},A:function(a){a.strokeRect(0,0,1,1)}});c.hg=c.ga(c.ub);c.Ab=c.ga(c.qa);c.fg=c.ga(c.Md);c.Wf=c.ga(c.Id);c.rect=c.ga(c.Rect)})(this.K);
(function(c,a){var d=a.I("audio"),e=["wav","mp3","ogg"],f=["audio/wav","audio/mpeg","audio/ogg"];Function.prototype.bind||(Function.prototype.bind=function(a){var c=this;return function(){return c.apply(a,arguments)}});c.HTMLAudioElement||(c.HTMLAudioElement=c.yf);c.requestAnimationFrame||(c.requestAnimationFrame=c.mozRequestAnimationFrame||c.msRequestAnimationFrame||function(a){return c.setTimeout(a,1E3/60)});c.cancelAnimationFrame||(c.cancelAnimationFrame=c.mozCancelAnimationFrame||c.msCancelAnimationFrame||
function(a){c.clearTimeout(a)});a.lb={audio:{},wc:"ontouchstart"in c.document};d&&d.canPlayType&&e.forEach(function(b,c){a.lb.audio[b]=d.canPlayType(f[c]);a.lb.audio[b]&&(a.lb.audio.hf=b)})})(this,this.K);(function(c,a){c.s=function(a){return new c.s.Nd(a)};c.extend(c.s,{ta:{},Nd:c.g.extend({x:0,y:0,Yc:0,Zc:0,Fa:1,Ga:1,o:null,element:null,interval:60,Se:null,Aa:null,Hb:!1,disabled:!1,d:function(d){var e=this;if("string"===typeof d||"object"===typeof d&&d.tagName)d={element:d};c.g.call(this,d);null===this.element?this.element=a.document:"string"===typeof this.element&&(this.element=c.id(this.element));e.o={};e.Aa={};e.vd=function(){e.qe()};e.Ta=function(a){e.be(a)};a.addEventListener("resize",this.Ta);
a.addEventListener("scroll",this.Ta);this.Se=a.setInterval(this.vd,this.interval);this.Ta();for(var f in c.s.ta)e.o[f]=new c.s.ta[f](e)},ng:function(c){var e=this;e.disabled=!0;a.setTimeout(function(){e.disabled=!1},c)},oc:function(a,c){if("object"===typeof a)for(var f in a)this.oc(f,a[f]);else{if(!c)throw Error("callback parameter is required.");var b=this.Aa[a];this.Aa[a]=b?function(a){b(a);c(a)}:c}return this},n:function(a,c){if(!this.disabled&&(c.eg=this,c.name=a,(!this.cb||!1!==this.cb(c))&&
this.Aa[a]))return c.preventDefault(),this.Aa[a](c)},be:function(){var c=this.element;c.getBoundingClientRect?(c=c.getBoundingClientRect(),this.bc=a.scrollX+(c.left|0)||0,this.cc=a.scrollY+(c.top|0)||0):(this.bc=c.clientLeft||0,this.cc=c.clientTop||0)},qe:function(){if(!1===this.disabled)for(var a in this.o)this.o[a].update()},Dd:function(a,c){a=a*this.Fa-this.bc;c=c*this.Ga-this.cc;this.Yc=a-this.x;this.Zc=c-this.y;this.x=a;this.y=c},Bb:function(){this.disable();this.Aa=null;a.removeEventListener("scroll",
this.Ta);a.removeEventListener("resize",this.Ta);a.clearInterval(this.vd)},enable:function(){this.disabled=!1;for(var a in this.o)this.o[a].enable()},disable:function(){this.disabled=!0;for(var a in this.o)this.o[a].disable()}}),sa:c.g.extend({W:null,V:null,enabled:!1,Oa:null,Na:null,d:function(a){this.W={};this.e=a;this.V=a.element;this.enable();a.Hb&&this.Kc()},Kc:function(){this.Hb=!0},update:function(){},wa:function(a,c){var f=c.bind(this);this.W[a]=f;this.V.addEventListener(a,f)},xa:function(a){this.V.removeEventListener(a,
this.W[a])},enable:function(){this.enabled||(this.Oa(),this.enabled=!0);return this},disable:function(){this.enabled&&(this.Na(),this.enabled=!1);return this},Bb:function(){this.disable();for(var a in this.e.o)if(this.e.o[a]===this){delete this.e.o[a];break}}})})})(this.K,this);
(function(c){c.s.ta.Qd=c.s.sa.extend({oa:1,pa:1,bc:0,cc:0,Tc:!0,Ma:function(a){this.e.Dd(a.pageX,a.pageY)},Fc:function(a){var c={0:"buttonY",1:"buttonX",2:"buttonA"}[a.button];this.Ma(a);this.e.n(c,a);this.e.n("button",a);return!1},Kc:function(){this.Tc=!1},oe:function(a){this.Tc&&(this.Ma(a),(Math.abs(this.e.Yc)>this.oa||Math.abs(this.e.Zc)>this.pa)&&this.e.n("move",a))},Oa:function(){this.wa("mousemove",this.oe);this.wa("click",this.Fc);this.wa("contextmenu",this.Fc)},Na:function(){this.xa("mousemove");
this.xa("click");this.xa("contextmenu")}})})(this.K,this);
(function(c){c.s.ta.Touch=c.s.sa.extend({oa:20,pa:20,Cb:70,Ke:200,ff:null,gf:null,touches:null,Wb:"linear",set Ib(a){this.Wb=a;this.Cc="linear"===a?this.Xd:this.Yd},get Ib(){return this.Wb},a:25,ca:0,Cc:null,d:function(a){c.s.sa.call(this,a);this.Ib=this.Wb},Ma:function(a){this.e.Dd(a.pageX,a.pageY)},ec:function(a,c){for(var e=a.changedTouches,f=e.length,b;f--;)b=e[f].identifier,b=this.touches[b]||(this.touches[b]={id:b}),b.ea=a,b.wc=e[f],this.Ma(b.wc),c(b,this)},update:function(){if(!this.Hb){var a=
this.touches,c,e;for(e in a)c=a[e],c.af||(this.Ma(c.wc),this.e.n("buttonY",c.ea))}},Xc:function(a){a.af=!0;this.e.n(a.direction,a.ea);this.Hb||(a.ea.direction=a.direction,this.e.n("move",a.ea))},Xd:function(a,c){var e=c.e.x,f=c.e.y,b=e-a.lc,g=f-a.mc,h;b<-c.oa?(a.lc=e,h="left"):b>c.oa&&(a.lc=e,h="right");g<-c.pa?(a.mc=f,h="up"+(h?"_"+h:"")):g>c.pa&&(a.mc=f,h="down"+(h?"_"+h:""));(a.direction=h)&&c.Xc(a)},Yd:function(a,c){var e=c.e.x,f=c.e.y,b=a.ob-e,g=a.pb-f,e=e-a.td,f=f-a.ud;(b>c.oa||b<-c.oa)&&(g>
c.pa||g<-c.pa)&&(a.ea.ca=Math.atan2(f,e),c.e.n("move",a.ea))},ve:function(a){this.ec(a,this.Cc)},de:function(a){var c=this.e.x-a.ob,e=this.e.y-a.pb,f;c<-this.Cb?f="buttonY":c>this.Cb&&(f="buttonA");e<-this.Cb?f="buttonX":e>this.Cb&&(f="buttonB");f?this.e.n(f,a.ea):a.direction&&this.Xc(a)},Cd:function(a){a.td=this.ff||a.ob-Math.cos(this.ca)*this.a;a.ud=this.gf||a.pb-Math.sin(this.ca)*this.a},Zd:function(a,c){a.start=Date.now();a.ob=a.lc=c.e.x;a.pb=a.mc=c.e.y;"radial"===c.Ib&&c.Cd(a)},Wd:function(a,
c){Date.now()-a.start<c.Ke&&c.de(a);delete c.touches[a.id]},we:function(a){this.ec(a,this.Zd)},ue:function(a){this.ec(a,this.Wd)},Oa:function(){this.wa("touchmove",this.ve);this.wa("touchstart",this.we);this.wa("touchend",this.ue);this.touches={}},Na:function(){this.xa("touchmove");this.xa("touchstart");this.xa("touchend")}})})(this.K,this);
(function(c,a){var d=a.document,e={32:"buttonB",13:"buttonY",16:"buttonX",17:"buttonA",37:"left",38:"up",39:"right",40:"down",105:"up_right",103:"up_left",99:"down_right",97:"down_left"};c.s.ta.Hf=c.s.sa.extend({ab:null,keys:null,ke:function(a){this.keys[a.keyCode]=a;this.ab[a.keyCode]&&a.preventDefault()},d:function(a){this.keys={};c.s.sa.call(this,a);null===this.ab&&c.extend(this.ab={},e)},le:function(a){this.keys[a.keyCode]=!1},update:function(){var a,b,c;for(c in this.ab)if(b=this.keys[c])a=this.ab[c],
this.e.n(a,b),32<c&&(b.direction=a,this.e.n("move",b)),this.e.n("button",b)},Oa:function(){this.keys={};this.W.kd=this.ke.bind(this);this.W.ld=this.le.bind(this);d.addEventListener("keydown",this.W.kd);d.addEventListener("keyup",this.W.ld)},Na:function(){this.keys={};d.removeEventListener("keydown",this.W.kd);d.removeEventListener("keyup",this.W.ld)}})})(this.K,this);(function(c,a){a.navigator.rg&&(c.s.ta.Gf=c.s.sa.extend({Oa:function(){},Na:function(){}}))})(this.K,this);window.K({kb:{width:1024,height:660},sc:function(c){function a(){0===window.orientation%180?t.yd():t.pause()}function d(){k.Fa=h.canvas.width/h.canvas.clientWidth;k.Ga=h.canvas.height/h.canvas.clientHeight}var e=this.Q.width,f=this.Q.height,b=c.Ye(),g={rf:b.gd("assets/asteroids_ss.png"),la:b.gd("assets/asteroids_BG.png"),B:c.B(),rc:b.audio("assets/asteroids_saucer.wav"),pf:b.audio("assets/asteroids_shoot.wav"),sf:b.audio("assets/asteroids_thrust.wav"),fa:b.audio("assets/asteroids_explosion.wav"),
Ea:function(a){var b=a.cloneNode();b.volume=a.volume;b.play()}},h=this.Q,m=h.md({background:!0}),n=h.md(),k=c.s(n.canvas),l=c.m.extend({Ed:.2,acceleration:.5,a:30,Ba:5,ha:0,Xa:10,Ra:0,Te:200,ja:!0,Ve:!0,q:0,t:0,b:-37,c:-35,M:function(){var a=g.B,b=this.bf=a.clip([11]),c=a.clip([9,10]),d=a.clip([12,13,14]);b.Qb=.1;b.T();d.Qb=.5;d.T(function(){d.parent.remove();d.go(0)}).L(-42,-46).go(0);this.Fa=this.Ga=.8;this.add(b).T(c).T(d).stop().reset(!0)},ma:function(){this.fc||(0<this.ha&&this.ha--,0<this.Ra?
this.Ra--:0===this.Ra&&(this.go(0),this.Ra=null))},reset:function(a){var b=this,d=b.bf,e=c.Fd({duration:this.Te,ac:!0,Nb:function(){b.ja=!1;d.go(0).stop()}});a&&b.set({x:h.width/2,y:h.height/2,q:0,t:0,rotation:-Math.PI/2});b.ja=!0;b.go(0);h.add(e);b.fc=!1;d.play();k.enable()},Wa:function(a){this.fc||a.rb.Ya||a.Ia.Ya||this.ja||(g.Ea(g.fa),k.disable(),this.fc=!0,this.go(2),this.Ba--)},left:function(){this.rotation-=this.Ed},right:function(){this.rotation+=this.Ed},Qc:function(){this.go(1);this.xe(this.acceleration);
this.Ra=10;g.Ea(g.sf)},Uf:function(){this.t=this.q=0},n:function(){var a,b,c=this.a+5;0===this.ha&&this.parent&&(a=Math.cos(this.rotation),b=Math.sin(this.rotation),this.parent.add(new u({q:a*this.Xa,t:b*this.Xa,x:this.x+a*c,y:this.y+b*c,Ya:!0})),g.Ea(g.pf),this.ha=10)},xe:function(a){this.q+=a*Math.cos(this.rotation);this.t+=a*Math.sin(this.rotation)}}),p=c.m.extend({c:-19,b:-37,t:0,a:20,p:0,ha:50,Xa:5,l:null,M:function(){g.rc.loop=!0;this.add(g.B.P(15))},reset:function(){var a=c.hc(200);this.y=
.5<Math.random()?f-a:a;.5<Math.random()?(this.x=e-this.b,this.q=-2-c.ka(4)):(this.x=this.b,this.q=2+c.ka(4));g.rc.play();return this},remove:function(){g.rc.pause();c.f.prototype.remove.call(this)},ma:function(){this.x!==this.b&&this.x!==e-this.b||this.remove();0===this.ha--&&this.n()},n:function(){var a=this.l.x-this.x,b=this.l.y-this.y,c=Math.sqrt(a*a+b*b),a=a/c,b=b/c;this.parent&&this.parent.add(new u({x:this.x+this.a*a,y:this.y+(this.a+30)*b,q:this.Xa*a,t:this.Xa*b,bb:45,ad:!0}));this.ha=40},
Wa:function(a){a.rb.ad||a.Ia.ad||(this.p=a.rb.Ya||a.Ia.Ya?500:0,a=g.B.clip([12,13,14]),a.Qb=.5,a.L(this.x,this.y).$b("origin").T(a.remove.bind(a)).go(0),g.Ea(g.fa),h.add(a),this.remove())}}),r=c.m.extend({dc:null,Lb:null,Mb:null,M:function(){this.dc=new c.Ja.qa;this.De=this.He.bind(this)},He:function(a,b){var d;!this.dc.qc(a,b)||a.ja&&b.ja||(c.extend(d={},this.dc),setTimeout(function(){a.Wa(d);b.Wa(d)},0),this.Lb(a,b))},yb:function(a){a.Pa=a.x;a.Qa=a.y;c.m.prototype.yb.apply(this,[a])},ma:function(){var a=
0;this.gb&&(this.Va(function(b){b.Ue||(b.x>h.width-b.b?b.x=b.Pa=b.b:b.x<b.b&&(b.x=b.Pa=h.width-b.b),b.y>h.height-b.c?b.y=b.Qa=b.c:b.y<b.c&&(b.y=b.Qa=h.height-b.c));b.Pa+=b.q;b.Qa+=b.t;b.x=b.Pa|0;b.y=b.Qa|0;b.na&&(b.rotation+=b.na);b.ja&&!b.Ve&&(a+=1)}),0===a?this.Mb():this.Ie(this.De))}}),q=c.m.extend({Y:4,od:.05,a:122,p:20,q:null,t:null,na:null,za:null,ja:!0,da:function(a){this.add(a.P(2))},fa:function(){var a=g.B.clip([3,4,5,6,7,6,5,4,3]);a.T(a.remove.bind(a)).go(0);a.L(this.x,this.y);a.$b("origin");
return a},M:function(){this.da(g.B);this.stop().go(0);null===this.q&&(this.q=-this.Y+c.ka(2*this.Y));null===this.t&&(this.t=-this.Y+c.ka(2*this.Y));null===this.na&&(this.na=c.ka(this.od));this.b=this.c=-this.a},Wa:function(a){var b,d;this.parent&&(this.za&&(b=-(1+c.ka(this.Y)*a.Kb),d=1+c.ka(this.Y)*a.Jb,a={x:this.x+b*this.a/2,y:this.y+d*this.a/2,q:b,t:d},this.parent.add(new this.za(a)),a.q=-a.q,a.t=-a.t,a.x=this.x-b*this.a/2,a.y=this.y-d*this.a/2,this.parent.add(new this.za(a))),g.Ea(g.fa),h.add(this.fa()),
this.remove())}}),s=q.extend({a:34,Y:5,od:.1,source:g.Sf,za:null,p:100,da:function(a){this.add(a.P(1))}}),s=q.extend({a:71,Y:4.5,source:g.Rf,za:s,p:50,da:function(a){this.add(a.P(0))}}),v=q.extend({za:s}),u=c.ua.extend({bb:50,a:5,Ya:!1,Ue:!0,q:0,t:0,b:-4,c:-5,d:function(a){this.source=g.B.P(17).source;c.ua.apply(this,[a])},update:function(){0===this.bb--&&this.remove()},Wa:function(){g.Ea(g.fa);this.remove()}}),w=c.m.extend({y:20,w:0,Ba:function(a){var b,c=-32;for(this.Gb.xd().T();a--;)b=g.B.P(8),
b.x=c+=44,this.Gb.add(b);this.Gb.J()},Me:function(){this.Ca.J();this.Ca.remove()},p:function(a){this.w+=a;this.Ca.text=this.w;this.Ca.ba("right");a&&this.Ca.J()},M:function(){this.Gb=c.clip({x:30,height:50,width:100});this.Ca=c.text({font:'30px "Press Start 2P"',fill:"#eee",text:this.w,x:h.width-30,height:50});this.add([this.Gb,this.Ca]);this.p(0)}}),q=c.m.extend({fill:"#fff",Qe:function(){var a=g.B;a.source=g.rf;a.slice(0,0,143,139);a.slice(0,139,67,66);a.slice(260,238,241,240);a.slice(67,139,63,
71,"explosion1");a.slice(0,210,91,104,"explosion2");a.slice(130,176,130,131,"explosion3");a.slice(143,0,187,176,"explosion4");a.slice(330,0,235,238,"explosion5");a.slice(91,210,39,35,"miniship");a.slice(0,314,72,68,"ship-thrust1");a.slice(0,382,72,68,"ship-thrust2");a.slice(0,450,72,68,"ship");a.slice(72,473,157,159,"ship-explode1");a.slice(72,632,157,145,"ship-explode2");a.slice(72,314,157,159,"ship-explode3");a.slice(260,478,75,38,"alien");a.slice(0,0,0,0,"empty");a.slice(91,245,9,9,"bullet")},
Oe:function(){g.fa.volume=.5},M:function(){this.nd=c.text({font:'20px "Press Start 2P"'}).L(10,30);this.add(this.nd);b.eb=this.eb.bind(this);b.ready(this.fb.bind(this))},eb:function(a){this.nd.text="Loading "+(100*a|0)+"%"},fb:function(){this.remove();this.Qe();this.Oe();h.add(new x)}}),x=c.m.extend({fill:"#eee",width:e,height:f,M:function(){var a=c.text({y:150,font:'60px "Press Start 2P"',text:"Asteroids",height:60}),b=c.text({y:250,font:'24px "Press Start 2P"',text:"Press any key to start",height:24});
a.ba("center");b.ba("center");this.add([a,b]).$b("center");k.cb=this.cb.bind(this);m.add(g.la);m.J()},cb:function(a){if("move"!==a.name)return this.remove(),k.cb=null,k.disable(),h.add(new y),!1}}),y=c.m.extend({ic:1,tc:null,$c:null,$e:18E4,Bd:800,nb:null,Le:function(){return new v({x:c.hc(h.width),y:c.hc(h.height)})},jd:function(a){var b=c.text({text:"Level "+this.ic,font:'30px "Press Start 2P"',fill:"#eee",x:e/2,y:100});b.ba("center");n.add([b,c.Fd({target:b,bb:60,ac:!0,Nb:function(){b.remove();
n.J()}})]);this.l.reset(a);k.o.Touch&&(k.o.Touch.ca=this.l.rotation);this.la.add(this.l);this.p.Ba(this.l.Ba)},hd:function(){for(var a=this.ic+1;a--;)this.la.add(this.Le());this.jd();this.Xe()},Xe:function(){this.la.play()},dd:function(){var a=c.text({text:"GAME OVER",x:e/2,y:100,fill:"#eee",font:'50px "Press Start 2P"'}),b=Date.now()-this.tc,d=c.text({text:"Time: "+("00"+(b/6E4|0)).substr(-2)+":"+("00"+(b%6E4/1E3|0)).substr(-2),x:e/2,y:200,fill:"#ecc",font:'30px "Press Start 2P"'}),f=c.text({text:"Score: "+
this.p.w,x:e/2,y:250,fill:"#eee",font:'50px "Press Start 2P"'});a.ba("center");d.ba("center");f.ba("center");n.add([a,d,f]);n.J();k.disable();this.p.Ba(0);this.p.Me();this.Db=!0;this.nb&&this.nb.remove();window.localStorage.xf=JSON.stringify({p:this.p.w,Ha:b})},ma:function(){!this.la.gb||this.l.parent||this.Db?0===this.Bd--&&this.cf():0<this.l.Ba?this.jd(!0):this.dd();!this.Db&&Date.now()>=this.$c&&(this.l.remove(),this.dd())},Lb:function(a,b){var c=(a.p||0)+(b.p||0);c&&!this.Db&&this.p.p(c)},Mb:function(){this.Db||
(this.ic++,this.hd())},cf:function(){this.Bd=800;this.Rc.parent||this.la.add(this.Rc.reset())},Re:function(){var a=k.o.Touch;a&&(document.addEventListener("touchmove",function(a){a.preventDefault();return!1}),a.oa=a.pa=4,a.Ib="radial",k.o.Qd.Bb(),n.add(this.nb=new z({l:this.l})))},Pe:function(){var a=this,b=a.l;a.Re();k.oc({left:b.left.bind(b),right:b.right.bind(b),up:b.Qc.bind(b),buttonB:b.n.bind(b),buttonY:a.nb?function(){a.nb.Ne(k.x,k.y)}:function(){b.n()}})},M:function(){var a=this.l=new l,b=
this.la=new r,c=this.p=new w;this.Rc=new p({l:a});b.stop();b.Lb=this.Lb.bind(this);b.Mb=this.Mb.bind(this);n.add(c);n.J();this.add(b);this.Pe();this.hd();this.tc=Date.now();this.$c=this.tc+this.$e}}),z=c.m.extend({y:f-100,fill:"#eee",l:null,$a:0,Uc:function(a,b,c){return a>c.x-10&&a<c.x+2*c.a&&b>this.y-10&&b<this.y+2*c.a&&c.bd},Ne:function(a,b){var c=this.Uc(a,b,this.Ae)||this.Uc(a,b,this.ze);c?c.call(this.l):a<e/2&&(k.o.Touch.ca=this.l.rotation,this.$a=60)},ef:function(a){a.ca&&k.x<e/2&&(this.l.rotation=
a.ca)},ma:function(){0<this.$a?(this.Rb.rotation=this.l.rotation,this.$a--,this.Rb.parent||h.add(this.Rb)):0===this.$a&&(this.Rb.remove(),this.$a=null)},M:function(){var a=c.clip({x:e-200,a:32,bd:l.prototype.Qc}).add([c.Ab({alpha:.5,a:32}),g.B.da(100,245,26,34).L(13,15).scale(1.5,1.5)]),b=c.clip({x:e-100,a:32,bd:l.prototype.n}).add([c.Ab({alpha:.5,a:32}),g.B.da(260,516,64,68).L(7,5).scale(.8,.8)]),d=c.clip({x:50}).add([c.Ab({alpha:.5,a:32}),g.B.da(335,478,117,117).L(-27,-25)]),h=this.Rb=c.Ab({x:82,
a:10,fill:"#e00",alpha:.7,y:f-70,c:-10,b:40,rotation:-Math.PI/2});k.oc("move",this.ef.bind(this));k.o.Touch.Cd=function(a){a.td=h.x;a.ud=h.y};this.add([this.Ae=b,this.ze=a,d])}}),t=this;h.add([m,new q,n]);window.onorientationchange=a;a();navigator.cg||(window.addEventListener("resize",d),d());this.cd=45;this.Ad();window.Fe&&window.Fe(g,h)}});
